"use strict";(self.webpackChunk_olmokit_docs=self.webpackChunk_olmokit_docs||[]).push([[9714],{7522:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>h});var a=n(9901);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),c=r,h=d["".concat(s,".").concat(c)]||d[c]||m[c]||i;return n?a.createElement(h,o(o({ref:t},u),{},{components:n})):a.createElement(h,o({ref:t},u))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=c;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2159:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(3027),r=(n(9901),n(7522));const i={title:"App"},o=void 0,l={unversionedId:"laravel-frontend/App",id:"laravel-frontend/App",title:"App",description:"Composers",source:"@site/docs/laravel-frontend/App.md",sourceDirName:"laravel-frontend",slug:"/laravel-frontend/App",permalink:"/olmokit/laravel-frontend/App",draft:!1,editUrl:"https://github.com/olmokit/olmokit/tree/main/apps/docs/docs/docs/laravel-frontend/App.md",tags:[],version:"current",frontMatter:{title:"App"},sidebar:"docs",previous:{title:"Overview",permalink:"/olmokit/laravel-frontend"},next:{title:"Auth",permalink:"/olmokit/laravel-frontend/Auth"}},s={},p=[{value:"Composers",id:"composers",level:2},{value:"App Composer",id:"app-composer",level:3},{value:"Controllers",id:"controllers",level:2},{value:"Route&#39;s Base controller",id:"routes-base-controller",level:3},{value:"Route&#39;s options",id:"routes-options",level:3},{value:"Middleware",id:"middleware",level:2},{value:"<code>auth</code>",id:"auth",level:3},{value:"<code>auth.activate</code>",id:"authactivate",level:3},{value:"<code>guest</code>",id:"guest",level:3},{value:"<code>page-cache</code>",id:"page-cache",level:3},{value:"<code>dev.only</code>",id:"devonly",level:3},{value:"<code>seo.noindex</code>",id:"seonoindex",level:3},{value:"Creating custom middlewares",id:"creating-custom-middlewares",level:3},{value:"Routes",id:"routes",level:2},{value:"Routes organization",id:"routes-organization",level:3},{value:"Custom routes",id:"custom-routes",level:3},{value:"Services",id:"services",level:2},{value:"Creating custom service providers",id:"creating-custom-service-providers",level:3}],u={toc:p},d="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(d,(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"composers"},"Composers"),(0,r.kt)("h3",{id:"app-composer"},"App Composer"),(0,r.kt)("p",null,"This composer provider ",(0,r.kt)("em",{parentName:"p"},"always")," exposes to ",(0,r.kt)("strong",{parentName:"p"},"all views")," the following data:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$trans"),": all translated strings for the current locale, keys can be interpolated dynamically in the template with dynamic variables, for instance one could do in a blade file: ",(0,r.kt)("inlineCode",{parentName:"li"},"{{ $trans['myStaticPrefix'.$data['myDynamicSuffix']] }}")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$locale"),": the current locale code, same as doing ",(0,r.kt)("inlineCode",{parentName:"li"},"App::getLocale()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$i18n"),": internationalization related part of the response from the ",(0,r.kt)("a",{parentName:"li",href:"/olmokit/laravel-frontend/Cms#structure"},(0,r.kt)("inlineCode",{parentName:"a"},"CMS API structure endpoint"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$analytics"),": analytics related part of the response from the ",(0,r.kt)("a",{parentName:"li",href:"/olmokit/laravel-frontend/Cms#structure"},(0,r.kt)("inlineCode",{parentName:"a"},"CMS API structure endpoint"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$user"),": currently logged in user data from session, same as doing ",(0,r.kt)("inlineCode",{parentName:"li"},"AuthApi::user()")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$userJs"),": currently logged in user data from session without sensitive data like tokens, use this to ",(0,r.kt)("a",{parentName:"li",href:"/olmokit/guides/data#accessing-the-currently-authenticated-user"},"expose the user to JavaScript"),", same as doing ",(0,r.kt)("inlineCode",{parentName:"li"},"AuthApi::userJs()"))),(0,r.kt)("h2",{id:"controllers"},"Controllers"),(0,r.kt)("h3",{id:"routes-base-controller"},"Route's Base controller"),(0,r.kt)("p",null,"Each of your project route's controllers should extend ",(0,r.kt)("inlineCode",{parentName:"p"},"LaravelFrontend\\App\\Controllers\\Base"),". It always exposes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"to its ",(0,r.kt)("strong",{parentName:"p"},"route view")," (you need to manually forward it to sub components in case you need):"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$data"),": all the data coming from the CMS API for the given route, merged with those defined in the ",(0,r.kt)("inlineCode",{parentName:"li"},"routes/{myroute}/index.json")," file and those add by the route's controller ",(0,r.kt)("inlineCode",{parentName:"li"},"addVars")," method."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$test"),": data defined in the ",(0,r.kt)("inlineCode",{parentName:"li"},"routes/{myroute}/test.json")," file when the URL is requested with a ",(0,r.kt)("inlineCode",{parentName:"li"},"?test=true")," query parameter."))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"to ",(0,r.kt)("strong",{parentName:"p"},"all views")," (including routes' sub components):"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$route"),": the route name/id, which matches both the CMS API ",(0,r.kt)("inlineCode",{parentName:"li"},"/structure -> routes")," endpoint and the route folder name in the structure of your project"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$useBarba"),": whether the current route uses ",(0,r.kt)("a",{parentName:"li",href:"https://barba.js.org/"},"barba.js")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$cached"),": whether this route is potentially being served by ",(0,r.kt)("inlineCode",{parentName:"li"},"page-cache")," middleware, in that case stuff like authentication will need to be all asynchronously implemented in JavaScript."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$langs"),": an array of data regarding the localisation for the current route, this data can be used in child components without being passed down manually and is meant to build components like language switchers. Each array element contains:",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"current"),": boolean value that states if this locale is the current one"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"locale"),": the locale code, e.g. ",(0,r.kt)("inlineCode",{parentName:"li"},"en")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"it")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"url"),": the current route's url localised for this locale"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"switchUrl"),": the internal laravel endpoint used to switch language for the current route with this locale, this is used in the core component ",(0,r.kt)("inlineCode",{parentName:"li"},"<x-i18n-links />")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$isErrorRoute"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"boolean")," value to flag the error pages (",(0,r.kt)("inlineCode",{parentName:"li"},"400"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"404"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"419"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"500"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"503"),")")))),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Each route can define a ",(0,r.kt)("inlineCode",{parentName:"p"},"test.json")," file in its test folder, when this route is visited with query param ",(0,r.kt)("inlineCode",{parentName:"p"},"?test=true")," you will have in your route blade template the ",(0,r.kt)("inlineCode",{parentName:"p"},"$test")," variable accessible that you might print for instance with the helper function ",(0,r.kt)("inlineCode",{parentName:"p"},"json"),", sample:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-html"},"<p>My test data is:</p>\n\n@json($test)\n"))),(0,r.kt)("h3",{id:"routes-options"},"Route's options"),(0,r.kt)("p",null,"Route controllers that extends ",(0,r.kt)("inlineCode",{parentName:"p"},"LaravelFrontend\\App\\Controllers\\Base")," can be tweaked in their behaviour thrugh some public class properties:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$cmsApiSlug")," ",(0,r.kt)("em",{parentName:"li"},"null|string"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," by default, if set the API call to the Cms will use this slug to fetch the route data, the final request URL will be prefixed by the current ",(0,r.kt)("inlineCode",{parentName:"li"},"locale")," therefore looking as such: ",(0,r.kt)("inlineCode",{parentName:"li"},"$CMS_API_URL/$locale/$cmsApiSlug")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"$useBarba")," ",(0,r.kt)("em",{parentName:"li"},"bool"),": ",(0,r.kt)("inlineCode",{parentName:"li"},"false")," by default, set this to ",(0,r.kt)("inlineCode",{parentName:"li"},"true")," if your route i managed through the ",(0,r.kt)("a",{parentName:"li",href:"https://barba.js.org/"},"barba.js")," lifecycles.")),(0,r.kt)("h2",{id:"middleware"},"Middleware"),(0,r.kt)("p",null,"Middlewares can be used in a fragment route defintion, for instance in ",(0,r.kt)("inlineCode",{parentName:"p"},"/src/fragments/routes.php"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'Route::get("userdialog", [AuthDialog::class, "render"])->middleware("auth");\n')),(0,r.kt)("p",null,"or in a route's Controller, for instance in ",(0,r.kt)("inlineCode",{parentName:"p"},"/src/routes/wishlist/index.php"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"class RouteWishlist extends Base\n{\n    public function __construct()\n    {\n        $this->middleware('auth');\n    }\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"You can ",(0,r.kt)("a",{parentName:"p",href:"#creating-custom-middlewares"},"create your custom middlewares")," if needed.")),(0,r.kt)("p",null,"Custom available middlewares are:"),(0,r.kt)("h3",{id:"auth"},(0,r.kt)("inlineCode",{parentName:"h3"},"auth")),(0,r.kt)("p",null,"Allows a request only to be reached by authenticated users, otherwise they will be redirected to the ",(0,r.kt)("inlineCode",{parentName:"p"},"login")," route (",(0,r.kt)("a",{parentName:"p",href:"/olmokit/guides/authentication#frontend-configuration"},"the route name is configurable"),")."),(0,r.kt)("h3",{id:"authactivate"},(0,r.kt)("inlineCode",{parentName:"h3"},"auth.activate")),(0,r.kt)("p",null,"Verifies a recently registered user's email. It must be put in the ",(0,r.kt)("inlineCode",{parentName:"p"},"activate")," route (by the default the same as the login route, ",(0,r.kt)("a",{parentName:"p",href:"/olmokit/guides/authentication#frontend-configuration"},"the route name is configurable"),")."),(0,r.kt)("h3",{id:"guest"},(0,r.kt)("inlineCode",{parentName:"h3"},"guest")),(0,r.kt)("p",null,"Allows a request only to be reached by non-authenticated users, otherwise they will be redirected to the ",(0,r.kt)("inlineCode",{parentName:"p"},"profile")," route (",(0,r.kt)("a",{parentName:"p",href:"/olmokit/guides/authentication#frontend-configuration"},"the route name is configurable"),")."),(0,r.kt)("h3",{id:"page-cache"},(0,r.kt)("inlineCode",{parentName:"h3"},"page-cache")),(0,r.kt)("p",null,"Determines if a request should be cached by ",(0,r.kt)("a",{parentName:"p",href:"https://github.com/JosephSilber/page-cache"},"silber/page-cache"),", it only does if there are no query parameters and we are not in the ",(0,r.kt)("inlineCode",{parentName:"p"},"local")," environment."),(0,r.kt)("h3",{id:"devonly"},(0,r.kt)("inlineCode",{parentName:"h3"},"dev.only")),(0,r.kt)("p",null,"Allows a request only to be reached during ",(0,r.kt)("inlineCode",{parentName:"p"},"local")," development, otherwise it redirects to 404."),(0,r.kt)("h3",{id:"seonoindex"},(0,r.kt)("inlineCode",{parentName:"h3"},"seo.noindex")),(0,r.kt)("p",null,"Prevents crawlers to index a certain route or routes group by setting the ",(0,r.kt)("a",{parentName:"p",href:"https://developers.google.com/search/docs/crawling-indexing/robots-meta-tag#xrobotstag"},"needed HTTP headers")),(0,r.kt)("h3",{id:"creating-custom-middlewares"},"Creating custom middlewares"),(0,r.kt)("p",null,"In your ",(0,r.kt)("inlineCode",{parentName:"p"},"src/middlewares")," folder (create it if you don't have it) you can create your custom middlewares classes. Each class should defined a property ",(0,r.kt)("inlineCode",{parentName:"p"},"$name")," that can be:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"public $name = 'global'"),": for middlewares run by default to every request to your application."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"public $name = 'web'"),": for middlewares run in the 'web' middleware group (basically all public routes)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"public $name = 'custom-name'"),": for middleware that are used individually, for instance inside a route's Controller constructor (",(0,r.kt)("a",{parentName:"li",href:"#middleware"},"see example"),") or in a custom route definition (",(0,r.kt)("a",{parentName:"li",href:"#custom-routes"},"see example"),".")),(0,r.kt)("p",null,"A simple example could be:"),(0,r.kt)("p",null,"in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/middlewares/TestWebMiddleware.php")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n\nnamespace resources\\middlewares;\n\nuse Illuminate\\Http\\Request;\nuse Illuminate\\Support\\Facades\\Session;\nuse Closure;\n\nclass TestWebMiddleware\n{\n  /**\n   * @var {\'global\' | \'web\' | string}\n   */\n  public $name = "web";\n\n  /**\n   * Handle an incoming request.\n   *\n   * @param  \\Illuminate\\Http\\Request  $request\n   * @param  \\Closure  $next\n   * @return mixed\n   */\n  public function handle(Request $request, Closure $next)\n  {\n    Session::put("testWebMiddleware", "web middleware works");\n\n    return $next($request);\n  }\n}\n')),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Remember that the ",(0,r.kt)("em",{parentName:"p"},"file name")," and the php ",(0,r.kt)("em",{parentName:"p"},"class name")," must match as per the autoloading standards.")),(0,r.kt)("p",null,"Under the hood a dynamic file is automatically generated at ",(0,r.kt)("inlineCode",{parentName:"p"},"/resources/middlewares/Middlewares.php")," containing the custom middlewares subdivided by types, deriving it from the property ",(0,r.kt)("inlineCode",{parentName:"p"},"$name"),". In ",(0,r.kt)("inlineCode",{parentName:"p"},"laravel-frontend"),"'s ",(0,r.kt)("inlineCode",{parentName:"p"},"App/Http/Kernel.php")," we then ",(0,r.kt)("strong",{parentName:"p"},"merge")," these project specific middlewares with those provided by default by the library (which cannot be removed)."),(0,r.kt)("h2",{id:"routes"},"Routes"),(0,r.kt)("p",null,"Routes are automatically derived from the folder structure of your ",(0,r.kt)("inlineCode",{parentName:"p"},"src/routes/")," folder and usually ",(0,r.kt)("a",{parentName:"p",href:"/olmokit/guides/working-without-api"},"but not necessarily")," work in tandem with the response of the CMS API. Routes are defined merging those declared by the ",(0,r.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/Cms#structure"},(0,r.kt)("inlineCode",{parentName:"a"},"CMS_API_URL/structure")," endpoint")," (",(0,r.kt)("em",{parentName:"p"},"dynamic routes"),") with those determined by your folder structure (",(0,r.kt)("em",{parentName:"p"},"static routes"),")."),(0,r.kt)("h3",{id:"routes-organization"},"Routes organization"),(0,r.kt)("p",null,"Route files are organised by folder, each route has its own folder and all its related ",(0,r.kt)("inlineCode",{parentName:"p"},"php"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"json"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"js"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"scss")," files is placed there. Every php/json file inside these folders is flattened to the ",(0,r.kt)("inlineCode",{parentName:"p"},"resources/")," folder and its name is modified through ",(0,r.kt)("inlineCode",{parentName:"p"},"@olmokit/cli"),". See ",(0,r.kt)("a",{parentName:"p",href:"/olmokit/folder-structure#srcroutes"},"more info here"),"."),(0,r.kt)("h3",{id:"custom-routes"},"Custom routes"),(0,r.kt)("p",null,"Although it is not recommended you can add other custom routes by adding a file ",(0,r.kt)("inlineCode",{parentName:"p"},"src/routes/routes.php")," and use the standard Laravel way of registering routes, e.g.:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n\nuse Illuminate\\Support\\Facades\\Route;\nuse resources\\routes\\Hello;\n\nRoute::get("hello", [Hello::class, "get"]);\nRoute::get("weird-page", [Hello::class, "get"])->middleware("custom-middleware");\nRoute::redirect("/an-old-url", "/", 302);\n')),(0,r.kt)("p",null,"You can then create your custom controllers or PHP classes directly in the routes folder in order to preserve the file naming, skipping the ",(0,r.kt)("a",{parentName:"p",href:"#routes-organization"},"aforementioned transformations"),", e.g. in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/routes/Hello.php"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n\nnamespace resources\\routes;\n\nclass Hello\n{\n  /**\n   * @return string\n   */\n  protected function get(): string\n  {\n    return "hello";\n  }\n}\n')),(0,r.kt)("h2",{id:"services"},"Services"),(0,r.kt)("p",null,"In general it's quite unlikely that you might need a cusotm service provider as it is better to encapsulate functionalities within components or fragments. Anyway you can still create them almost exactly as in the normal Laravel way by adding your files into ",(0,r.kt)("inlineCode",{parentName:"p"},"src/services")," (create it if you don't have it) and registering the providers in ",(0,r.kt)("inlineCode",{parentName:"p"},"config/app.php"),"."),(0,r.kt)("h3",{id:"creating-custom-service-providers"},"Creating custom service providers"),(0,r.kt)("p",null,"Here is a simple example:"),(0,r.kt)("p",null,"in ",(0,r.kt)("inlineCode",{parentName:"p"},"config/app.php"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n\nreturn [\n  "providers" => [resources\\services\\TestServiceProvider::class],\n];\n')),(0,r.kt)("p",null,"in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/services/TestComposer.php"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n\nnamespace resources\\services;\n\nuse Illuminate\\Support\\Facades\\App;\nuse Illuminate\\Support\\Facades\\Blade;\nuse Illuminate\\View\\View;\n\nclass TestComposer\n{\n  /**\n   * Bind data to the view.\n   *\n   * @param  View  $view\n   * @return void\n   */\n  public function compose(View $view)\n  {\n    $data = ["sample" => "custom directive works"];\n\n    $view->with("testComposer", "service composer works");\n\n    /**\n     * Test composer custom directive\n     *\n     * @param string $key\n     * @return void\n     */\n    Blade::directive("test", function (string $key = "") use ($data) {\n      return $data[$key] ?? $key . " (missing key)";\n    });\n  }\n}\n')),(0,r.kt)("p",null,"in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/services/TestServiceProvider.php"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"<?php\n\nnamespace resources\\services;\n\nuse Illuminate\\Support\\ServiceProvider;\nuse Illuminate\\Support\\Facades\\View;\n\nclass TestServiceProvider extends ServiceProvider\n{\n  /**\n   * Bootstrap any application services.\n   *\n   * @return void\n   */\n  public function boot()\n  {\n    View::composer(\"*\", '\\resources\\services\\TestComposer');\n  }\n}\n")))}m.isMDXComponent=!0}}]);