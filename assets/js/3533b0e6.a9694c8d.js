"use strict";(self.webpackChunk_olmokit_docs=self.webpackChunk_olmokit_docs||[]).push([[2914],{1357:(e,t,a)=>{a.d(t,{Zo:()=>m,kt:()=>N});var n=a(4863);function l(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){l(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,l=function(e,t){if(null==e)return{};var a,n,l={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var p=n.createContext({}),d=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},m=function(e){var t=d(e.components);return n.createElement(p.Provider,{value:t},e.children)},u="mdxType",s={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},k=n.forwardRef((function(e,t){var a=e.components,l=e.mdxType,r=e.originalType,p=e.parentName,m=o(e,["components","mdxType","originalType","parentName"]),u=d(a),k=l,N=u["".concat(p,".").concat(k)]||u[k]||s[k]||r;return a?n.createElement(N,i(i({ref:t},m),{},{components:a})):n.createElement(N,i({ref:t},m))}));function N(e,t){var a=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=a.length,i=new Array(r);i[0]=k;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[u]="string"==typeof e?e:l,i[1]=o;for(var d=2;d<r;d++)i[d]=a[d];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}k.displayName="MDXCreateElement"},1879:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>s,frontMatter:()=>r,metadata:()=>o,toc:()=>d});var n=a(3027),l=(a(4863),a(1357));const r={title:"Helpers"},i=void 0,o={unversionedId:"laravel-frontend/Helpers",id:"laravel-frontend/Helpers",title:"Helpers",description:"Source code should be self explanatory, keep in mind that these functions are always available from anywhere (both php and blade files) in the global scope and that are loaded by the composer autoloader mechanism.",source:"@site/docs/laravel-frontend/Helpers.md",sourceDirName:"laravel-frontend",slug:"/laravel-frontend/Helpers",permalink:"/olmokit/laravel-frontend/Helpers",draft:!1,editUrl:"https://github.com/olmokit/olmokit/tree/main/apps/docs/docs/docs/laravel-frontend/Helpers.md",tags:[],version:"current",frontMatter:{title:"Helpers"},sidebar:"docs",previous:{title:"Fragments",permalink:"/olmokit/laravel-frontend/Fragments"},next:{title:"Hooks",permalink:"/olmokit/laravel-frontend/Hooks"}},p={},d=[{value:"Global helpers",id:"global-helpers",level:2},{value:"<code>formatUrl</code>",id:"formaturl",level:3},{value:"<code>formatUrlPath</code>",id:"formaturlpath",level:3},{value:"<code>linkUrl</code>",id:"linkurl",level:3},{value:"<code>media</code>",id:"media",level:3},{value:"<code>to</code>",id:"to",level:3},{value:"Examples (<code>to</code>)",id:"examples-to",level:4},{value:"<code>t</code>",id:"t",level:3},{value:"<code>download</code>",id:"download",level:3},{value:"Examples (<code>download</code>)",id:"examples-download",level:4},{value:"<code>downloadWithAuth</code>",id:"downloadwithauth",level:3}],m={toc:d},u="wrapper";function s(e){let{components:t,...a}=e;return(0,l.kt)(u,(0,n.Z)({},m,a,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Source code should be self explanatory, keep in mind that these functions are always available from anywhere (both ",(0,l.kt)("inlineCode",{parentName:"p"},"php")," and ",(0,l.kt)("inlineCode",{parentName:"p"},"blade")," files) in the global scope and that are loaded by the ",(0,l.kt)("inlineCode",{parentName:"p"},"composer")," autoloader mechanism.\nWe should not put too many functions here, just those related to systemic handling like construction of URLs, links and translations."),(0,l.kt)("h2",{id:"global-helpers"},"Global helpers"),(0,l.kt)("p",null,"The following functions are always autoloaded and made available eveywhere in your app, both in ",(0,l.kt)("inlineCode",{parentName:"p"},"php")," files and in ",(0,l.kt)("inlineCode",{parentName:"p"},"blade.php")," template files."),(0,l.kt)("h3",{id:"formaturl"},(0,l.kt)("inlineCode",{parentName:"h3"},"formatUrl")),(0,l.kt)("p",null,"With this function we can set a standard for trailing/untrailing slash and, eventually, make it optional. Now we enforce a trailing slash on all URLs."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"formatUrl(string $url = ''): string\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"@returns ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),", @params")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"name"),(0,l.kt)("th",{parentName:"tr",align:null},"type"),(0,l.kt)("th",{parentName:"tr",align:null},"required"),(0,l.kt)("th",{parentName:"tr",align:null},"default value"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$url")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"''"),(0,l.kt)("td",{parentName:"tr",align:null},"An absolute URL")))),(0,l.kt)("h3",{id:"formaturlpath"},(0,l.kt)("inlineCode",{parentName:"h3"},"formatUrlPath")),(0,l.kt)("p",null,"With this function we can set a standard for trailing/untrailing slash and, eventually, make it optional. Now we enforce a trailing slash on all URLs."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"Don't pass here an absolute URL!")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"formatUrlPath(string $path = ''): string\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"@returns ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),", @params")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"name"),(0,l.kt)("th",{parentName:"tr",align:null},"type"),(0,l.kt)("th",{parentName:"tr",align:null},"required"),(0,l.kt)("th",{parentName:"tr",align:null},"default value"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$path")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"''"),(0,l.kt)("td",{parentName:"tr",align:null},"A relative URL")))),(0,l.kt)("h3",{id:"linkurl"},(0,l.kt)("inlineCode",{parentName:"h3"},"linkUrl")),(0,l.kt)("p",null,"Construct a localised URL according to the standard URL formatting conventions."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"linkUrl(string $slug = '', $locale = ''): string\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"@returns ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),", @params")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"name"),(0,l.kt)("th",{parentName:"tr",align:null},"type"),(0,l.kt)("th",{parentName:"tr",align:null},"required"),(0,l.kt)("th",{parentName:"tr",align:null},"default value"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$slug")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"''"),(0,l.kt)("td",{parentName:"tr",align:null},"A relative URL")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$locale")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"''"),(0,l.kt)("td",{parentName:"tr",align:null},"A valid locale, e.g. ",(0,l.kt)("inlineCode",{parentName:"td"},"en"))))),(0,l.kt)("h3",{id:"media"},(0,l.kt)("inlineCode",{parentName:"h3"},"media")),(0,l.kt)("p",null,"Output a an absolute URL to a remote media file. It uses as base URL the ",(0,l.kt)("inlineCode",{parentName:"p"},"assets->media")," value from the ",(0,l.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/Cms#structure"},(0,l.kt)("inlineCode",{parentName:"a"},"{CMS_API_URL}/structure")," endpoint"),"."),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"Don't pass here an absolute URL!")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"media(string $path = ''): string\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"@returns ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),", @params")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"name"),(0,l.kt)("th",{parentName:"tr",align:null},"type"),(0,l.kt)("th",{parentName:"tr",align:null},"required"),(0,l.kt)("th",{parentName:"tr",align:null},"default value"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$path")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"''"),(0,l.kt)("td",{parentName:"tr",align:null},"A relative URL")))),(0,l.kt)("h3",{id:"to"},(0,l.kt)("inlineCode",{parentName:"h3"},"to")),(0,l.kt)("p",null,"Dynamically generate a URL to the given ",(0,l.kt)("inlineCode",{parentName:"p"},"route"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"function to($route, $args = []): string\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"@returns ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),", @params")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"name"),(0,l.kt)("th",{parentName:"tr",align:null},"type"),(0,l.kt)("th",{parentName:"tr",align:null},"required"),(0,l.kt)("th",{parentName:"tr",align:null},"default value"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$route")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"''"),(0,l.kt)("td",{parentName:"tr",align:null},"The unique route name")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$args")),(0,l.kt)("td",{parentName:"tr",align:null},"array"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"[]"),(0,l.kt)("td",{parentName:"tr",align:null},"The dynamic slug portions to interpolate")))),(0,l.kt)("h4",{id:"examples-to"},"Examples (",(0,l.kt)("inlineCode",{parentName:"h4"},"to"),")"),(0,l.kt)("p",null,"Given routes defined in ",(0,l.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/Cms#structure"},(0,l.kt)("inlineCode",{parentName:"a"},'{CMS_API_URL}/structure -> "routes"'))," as:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "routes": [\n    {\n      "id": "myroutename",\n      "slug": {\n        "en": "/myroutename/"\n      }\n    },\n    {\n      "id": "mydynamicroutename",\n      "slug": {\n        "en": "/mydynamicroutename/:my-slug/"\n      }\n    }\n  ]\n}\n')),(0,l.kt)("p",null,"Here is how to create the links in your templates:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"<a href=\"{{ to('myroutename') }}\">My route</a>\n\n<a href=\"{{ to('mydynamicroutename', [ 'my-slug' => 'a-value' ]) }}\">My dynamic route</a>\n\n")),(0,l.kt)("h3",{id:"t"},(0,l.kt)("inlineCode",{parentName:"h3"},"t")),(0,l.kt)("p",null,"Dynamically translate a localised string optionally interpolating variables. Strings are defined in ",(0,l.kt)("inlineCode",{parentName:"p"},"src/assets/translations.csv"),", see ",(0,l.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/I18n"},"I18n docs"),")."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"function t(string $key = '', $args = null): string\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"@returns ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),", @params")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"name"),(0,l.kt)("th",{parentName:"tr",align:null},"type"),(0,l.kt)("th",{parentName:"tr",align:null},"required"),(0,l.kt)("th",{parentName:"tr",align:null},"default value"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$key")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"''"),(0,l.kt)("td",{parentName:"tr",align:null},"The unique string name")),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$args")),(0,l.kt)("td",{parentName:"tr",align:null},"array"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"null"),(0,l.kt)("td",{parentName:"tr",align:null},"The dynamic variables to interpolate")))),(0,l.kt)("p",null,"See ",(0,l.kt)("a",{parentName:"p",href:"/olmokit/guides/translations#t-function"},"example usage in the ",(0,l.kt)("inlineCode",{parentName:"a"},"translations")," guide"),"."),(0,l.kt)("h3",{id:"download"},(0,l.kt)("inlineCode",{parentName:"h3"},"download")),(0,l.kt)("p",null,"Dynamically generate a URL to a downladable file placed in ",(0,l.kt)("inlineCode",{parentName:"p"},"src/assets/media"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"function download($path, $viewIt = false): string\n")),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"@returns ",(0,l.kt)("inlineCode",{parentName:"p"},"string"),", @params")),(0,l.kt)("table",null,(0,l.kt)("thead",{parentName:"table"},(0,l.kt)("tr",{parentName:"thead"},(0,l.kt)("th",{parentName:"tr",align:null},"name"),(0,l.kt)("th",{parentName:"tr",align:null},"type"),(0,l.kt)("th",{parentName:"tr",align:null},"required"),(0,l.kt)("th",{parentName:"tr",align:null},"default value"),(0,l.kt)("th",{parentName:"tr",align:null},"description"))),(0,l.kt)("tbody",{parentName:"table"},(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$path")),(0,l.kt)("td",{parentName:"tr",align:null},"string"),(0,l.kt)("td",{parentName:"tr",align:null},"true"),(0,l.kt)("td",{parentName:"tr",align:null},"''"),(0,l.kt)("td",{parentName:"tr",align:null},"The full path of the file relative to ",(0,l.kt)("inlineCode",{parentName:"td"},"src/assets/media"))),(0,l.kt)("tr",{parentName:"tbody"},(0,l.kt)("td",{parentName:"tr",align:null},(0,l.kt)("inlineCode",{parentName:"td"},"$viewIt")),(0,l.kt)("td",{parentName:"tr",align:null},"boolean"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"false"),(0,l.kt)("td",{parentName:"tr",align:null},"Wether you want to open the file instead of triggering an immediate download")))),(0,l.kt)("h4",{id:"examples-download"},"Examples (",(0,l.kt)("inlineCode",{parentName:"h4"},"download"),")"),(0,l.kt)("p",null,"Given a file ",(0,l.kt)("inlineCode",{parentName:"p"},"example.pdf")," placed in ",(0,l.kt)("inlineCode",{parentName:"p"},"/src/assets/media/example.pdf")," and a file ",(0,l.kt)("inlineCode",{parentName:"p"},"example-nested.pdf")," placed in ",(0,l.kt)("inlineCode",{parentName:"p"},"/src/assets/media/some-folder/example-nested.pdf")," here is how to create links in your templates:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"<a href=\"{{ download('example.pdf') }}\">Download file</a>\n<x-link-outbound href=\"{{ download('example.pdf', true) }}\">View file</x-link-outbound>\n\n<a href=\"{{ download('some-folder/example-nested.pdf') }}\">Download nested file</a>\n<x-link-outbound href=\"{{ download('some-folder/example-nested.pdf', true) }}\">View nested file</x-link-outbound>\n")),(0,l.kt)("h3",{id:"downloadwithauth"},(0,l.kt)("inlineCode",{parentName:"h3"},"downloadWithAuth")),(0,l.kt)("p",null,"Dynamically generate a URL to a downladable file placed in ",(0,l.kt)("inlineCode",{parentName:"p"},"src/assets/media")," protecting the download with the ",(0,l.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/App#auth"},(0,l.kt)("inlineCode",{parentName:"a"},"auth")," middleware"),"."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-php"},"function downloadWithAuth($path, $viewIt = false): string\n")),(0,l.kt)("p",null,"This work exactly the same as the ",(0,l.kt)("a",{parentName:"p",href:"#download"},(0,l.kt)("inlineCode",{parentName:"a"},"download")," helper"),"."))}s.isMDXComponent=!0}}]);