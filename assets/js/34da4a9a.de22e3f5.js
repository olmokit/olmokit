"use strict";(self.webpackChunk_olmokit_docs=self.webpackChunk_olmokit_docs||[]).push([[9289],{7522:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>f});var o=n(9901);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),p=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return o.createElement(s.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},c=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,d=i(e,["components","mdxType","originalType","parentName"]),u=p(n),c=r,f=u["".concat(s,".").concat(c)]||u[c]||m[c]||a;return n?o.createElement(f,l(l({ref:t},d),{},{components:n})):o.createElement(f,l({ref:t},d))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,l=new Array(a);l[0]=c;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[u]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<a;p++)l[p]=n[p];return o.createElement.apply(null,l)}return o.createElement.apply(null,n)}c.displayName="MDXCreateElement"},4910:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var o=n(3027),r=(n(9901),n(7522));const a={title:"Download files"},l=void 0,i={unversionedId:"guides/downloads",id:"guides/downloads",title:"Download files",description:"Usually static files and downloads should be performed through an interaction with the CMS API, the files are stored there and the API expose the endpoints for downloading them.",source:"@site/docs/guides/downloads.md",sourceDirName:"guides",slug:"/guides/downloads",permalink:"/olmokit/guides/downloads",draft:!1,editUrl:"https://github.com/olmokit/olmokit/edit/main/docs/docs/guides/downloads.md",tags:[],version:"current",frontMatter:{title:"Download files"},sidebar:"docs",previous:{title:"Deploy through CI",permalink:"/olmokit/guides/deploy"},next:{title:"Using custom fonts",permalink:"/olmokit/guides/fonts"}},s={},p=[{value:"Custom implementations",id:"custom-implementations",level:2},{value:"Download route through <code>fragments</code>",id:"download-route-through-fragments",level:3}],d={toc:p},u="wrapper";function m(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"Usually static files and downloads should be performed through an interaction with the ",(0,r.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/Cms"},"CMS API"),", the files are stored there and the API expose the endpoints for downloading them.\nNonetheless there are still times where you want to make some static frontend files downloadable. To achieve that you can place them in ",(0,r.kt)("inlineCode",{parentName:"p"},"src/assets/media")," and quickly use the helper functions ",(0,r.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/Helpers#download"},(0,r.kt)("inlineCode",{parentName:"a"},"download"))," or ",(0,r.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/Helpers#downloadwithauth"},(0,r.kt)("inlineCode",{parentName:"a"},"downloadWithAuth"))," to output their links."),(0,r.kt)("p",null,"In your template, e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"src/routes/home")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},"<a href=\"{{ download('example.pdf') }}\">Download file</a>\n")),(0,r.kt)("p",null,"See more about ",(0,r.kt)("a",{parentName:"p",href:"/olmokit/laravel-frontend/Helpers#download"},"these helpers in their docs"),"."),(0,r.kt)("h2",{id:"custom-implementations"},"Custom implementations"),(0,r.kt)("p",null,"Despite the helpers you might still want to create your own download implementation, here is an example:"),(0,r.kt)("h3",{id:"download-route-through-fragments"},"Download route through ",(0,r.kt)("a",{parentName:"h3",href:"/olmokit/laravel-frontend/Fragments"},(0,r.kt)("inlineCode",{parentName:"a"},"fragments"))),(0,r.kt)("p",null,"In ",(0,r.kt)("inlineCode",{parentName:"p"},"src/fragments/routes.php")," add"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n\nuse Illuminate\\Support\\Facades\\Route;\nuse resources\\fragments\\Download;\n\nRoute::get("download/{path}", [Download::class, "get"]);\n')),(0,r.kt)("p",null,"Now create a file ",(0,r.kt)("inlineCode",{parentName:"p"},"src/fragments/Download.php")," along the lines of:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'<?php\n\nnamespace resources\\fragments;\n\nclass Download\n{\n  public function get(string $path)\n  {\n    $fullpath = public_path("assets/media/" . $name . "." . $extension);\n\n    // maybe you can have here some custom logic\n\n    if (file_exists($fullpath)) {\n      // to force the download of the file:\n      // return response()->download($fullpath);\n\n      // to display the file in the browser (whether that is possible):\n      return response()->file($fullpath);\n    }\n\n    abort(404);\n  }\n}\n')),(0,r.kt)("p",null,"In your template, e.g. ",(0,r.kt)("inlineCode",{parentName:"p"},"src/routes/home")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-php"},'<a href="/_/fragments/download/myfile.xls">Download file</a>\n')))}m.isMDXComponent=!0}}]);